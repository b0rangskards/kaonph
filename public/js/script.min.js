function isJson(str){try{JSON.parse(str)}catch(e){return!1}return!0}function processAjaxRequest(method,url,data){return $.ajax({method:method,url:url,data:data})}function processAjaxRequestWithFile(method,url,formData){return $.ajax({method:method,url:url,data:formData,contentType:!1,processData:!1,cache:!1})}function processFormAjaxRequestWithFile(form){var method=form.find('input[name="_method"]').val()||"POST",url=form.prop("action"),formData=new FormData($(form)[0]);return processAjaxRequestWithFile(method,url,formData)}function processFormAjaxRequest(form){var method=form.find('input[name="_method"]').val()||"POST",url=form.prop("action");return processAjaxRequest(method,url,form.serialize())}function resetForm(form){form[0].reset()}function clearForm(form){form.find("div.form-group").removeClass("has-error"),form.find("p.help-block").html("")}function displayError(fieldName,jsonObj){var current=$("input[name="+fieldName+"], select[name="+fieldName+"], textarea[name="+fieldName+"]"),currentFormGroup=current.closest("div.form-group"),errorMessage=(current.closest("p.help-block"),"");$.isEmptyObject(jsonObj)||(currentFormGroup.addClass("has-error"),$.each(jsonObj,function(key,value){errorMessage+=value+"<br/>"}),current.parent().parent().find("p.help-block").html(errorMessage).fadeIn(300))}function displayErrors(form,responseJSON){clearForm(form),$.each(responseJSON,function(key,value){displayError(key,value)})}function showSuccessMessage(message,title){swal({title:title||"Success",text:message,type:"success",timer:1500})}function showInfoMessage(message,title){swal({title:title||"Success",text:message,type:"info",timer:1500})}function showErrorMessage(message,title){swal({title:title||"Error",text:message,type:"error"})}function showGrowl(title,message,style,isFixed){$.growl({style:style,title:title,message:message,fixed:isFixed|!1,size:"large",location:"br"})}function showInfoGrowl(message){showGrowl("",message,"notice",!0)}function showActionGrowl(message){showGrowl("",message,"default")}function setHeiHeight(){"use strict";$("#promo_head").css({height:$(window).height()+"px"})}function addCSSRule(sheet,selector,rules,index){"insertRule"in sheet?sheet.insertRule(selector+"{"+rules+"}",index):"addRule"in sheet&&sheet.addRule(selector,rules,index)}function initMarkerBackground(id,marker,markerImage){addCSSRule(document.styleSheets[0],'img[src="'+marker+id+'"]','background:url("'+markerImage+'") no-repeat 4px 4px')}function clearOverlays(overlays){if(0==overlays.length)return!1;for(i=0;i<overlays.length;i++)overlays.pop().setMap(null)}function clearMarkers(markers){return 0==markers.length?!1:void markers.forEach(function(marker){marker.setMap(null)})}function toggleMarkers(markers,map){return closeInfoBox(),0==markers.length?!1:void markers.forEach(function(marker){null==marker.getMap()&&(marker.setMap(map),marker.setAnimation(google.maps.Animation.DROP))})}function toggleDrawingMode(map,drawingManager,markers,overlays){closeInfoBox();var currentDrawingMode=drawingManager.getDrawingMode();return currentDrawingMode==google.maps.drawing.OverlayType.MARKER||null==currentDrawingMode?(drawingManager.setDrawingMode(google.maps.drawing.OverlayType.CIRCLE),showActionGrowl("Drawing Mode")):currentDrawingMode==google.maps.drawing.OverlayType.CIRCLE&&(drawingManager.setDrawingMode(null),clearOverlays(overlays),toggleMarkers(markers,map),showActionGrowl("Pan Mode")),drawingManager.getDrawingMode()}function removeMarkerWithAnimation(marker){marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){marker.setMap(null)},1e3)}function closeInfoBox(){$("div.infoBox").remove()}function getInfoBox(item){return new InfoBox({content:'<div class="marker_info none" id="marker_info"><div class="info" id="info"><img src="'+item.image+'" class="logotype" alt="" height="100px"/><h3>'+item.name+'<span></span></h3><span class="type"><i class="fa fa-spoon"></i> '+item.type+'</span><span class="address">'+item.address+'</span><div class="rate_info"><span><i class="fa fa-heart-o flat-red"></i>'+item.loved_percentage+'%</span><span><i class="fa fa-thumbs-up flat-blue"></i>'+item.liked_percentage+'%</span><span><i class="fa fa-thumbs-down flat-yellow"></i>'+item.disliked_percentage+'%</span></div><a href="'+item.url_more_info+'" class="green_btn">More info</a><a href="#" data-restaurant-id="'+item.id+'" data-toggle="modal" data-target="#get_directions_modal" class="white_btn get_directions_btn">Get Directions</a><span class="arrow"></span></div></div>',disableAutoPan:!0,maxWidth:0,pixelOffset:new google.maps.Size(33,-215),closeBoxMargin:"3px 3px 3px 3px",isHidden:!1,pane:"floatPane",enableEventPropagation:!0})}function updateMapCenter(map,newLatLng){$(map).gmap3({map:{options:{center:[newLatLng.lat,newLatLng.lng]}}})}function setDrawingManagerOptions(drawingManager){drawingManager.setOptions({drawingMode:google.maps.drawing.OverlayType.MARKER,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT,drawingModes:[google.maps.drawing.OverlayType.CIRCLE]},circleOptions:{fillColor:"#2ecc71",fillOpacity:.3,strokeWeight:0,clickable:!0,editable:!0,zIndex:1}})}function checkGeolocationSupport(){return"undefined"==typeof navigator.geolocation?(showErrorMessage("Your browser doesn't support the Geolocation API","We're sorry for the inconvience."),!1):!0}function resetZoom(map){map.getZoom()!=GMAP.zoom&&map.setZoom(GMAP.zoom)}var GMAP={coords:{lat:10.30739,lng:123.89728},zoom:14,minZoom:17,defaultMarker:"images/default-marker.png"};$(document).ready(function(){"use strict";$("#register_btn").on("click",function(){$("#modal_register").removeClass("none")}),$("#register_owner_btn").on("click",function(){$("#modal_register_owner").removeClass("none")}),$(".close_modal").on("click",function(){var modal_container=$(this).parentsUntil(".modal_container").parent();modal_container.addClass("none")}),$(".log_btn").on("click",function(){$("#modal_login").removeClass("none")}),$("body").css("display","none"),$("body").fadeIn(500),$("a.transition").click(function(event){event.preventDefault();var linkLocation=this.href;$("body").fadeOut(900,function(){window.location=linkLocation})}),$(".mobile_menu").on("click",function(){$(".container-fluid.menu").removeClass("mobile")}),$("#close_menu").on("click",function(){$(".container-fluid.menu").addClass("mobile")}),$(".container-fluid.menu a").on("click",function(){$(".container-fluid.menu").addClass("mobile")})}),$(function(){function a(){e.toggleClass(j),d.toggleClass(i),f.toggleClass(k),g.toggleClass(l)}function b(){e.addClass(j),d.animate({left:"0px"},n),f.animate({left:o},n),g.animate({left:o},n)}function c(){e.removeClass(j),d.animate({left:"-"+o},n),f.animate({left:"0px"},n),g.animate({left:"0px"},n)}var d=$(".pushy"),e=$("body"),f=$("#container"),g=$(".push"),h=$(".site-overlay"),i="pushy-left pushy-open",j="pushy-active",k="container-push",l="push-push",m=$(".menu-btn, .pushy a"),n=200,o=d.width()+"px";if(cssTransforms3d=function(){var a=document.createElement("p"),b=!1,c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var d in c)void 0!==a.style[d]&&(a.style[d]="translate3d(1px,1px,1px)",b=window.getComputedStyle(a).getPropertyValue(c[d]));return document.body.removeChild(a),void 0!==b&&b.length>0&&"none"!==b}())m.click(function(){a()}),h.click(function(){a()});else{d.css({left:"-"+o}),f.css({"overflow-x":"hidden"});var p=!0;m.click(function(){p?(b(),p=!1):(c(),p=!0)}),h.click(function(){p?(b(),p=!1):(c(),p=!0)})}}),$(function(){function initialize(){showInfoGrowl("Right Click to Toggle Drawing Tools");var marker;mapObject=new google.maps.Map(document.getElementById("map"),mapOptions);var deffered=$.get("/restaurants/getdata");deffered.done(function(data){var items=data.data;$.each(items,function(key,item){marker=new google.maps.Marker({position:new google.maps.LatLng(item.lat,item.lng),map:mapObject,icon:data.marker+item.id,optimized:!1}),marker.setAnimation(google.maps.Animation.DROP),markers.push(marker),initMarkerBackground(item.id,data.marker,item.marker_image),google.maps.event.addListener(marker,"click",function(){closeInfoBox(),getInfoBox(item).open(mapObject,this),mapObject.panTo(new google.maps.LatLng(item.lat,item.lng))})})}),google.maps.event.addListener(mapObject,"click",function(){closeInfoBox()});var drawingManager=new google.maps.drawing.DrawingManager;setDrawingManagerOptions(drawingManager),google.maps.event.addListener(drawingManager,"circlecomplete",function(circle){clearOverlays(overlays),overlays.push(circle);var bounds=circle.getBounds();$.each(markers,function(key,marker){bounds.contains(marker.getPosition())?marker.setMap(mapObject):removeMarkerWithAnimation(marker)}),drawingManager.setDrawingMode(null),clearOverlays(overlays)}),$(document).mousedown(function(e){2==e.button&&(currentDrawingMode=toggleDrawingMode(mapObject,drawingManager,markers,overlays))}),drawingManager.set("drawingMode"),drawingManager.setMap(mapObject)}function renderResultOnMap(selectedRestaurant){var deffered=$.get("/restaurants/getbyname/",{name:selectedRestaurant});deffered.done(function(response){var item=response.data,found=!1;if(void 0!=response.message)return void showErrorMessage(response.message,"Couldnt render result on map.");if(markers.forEach(function(marker){var itemId=marker.icon.split("#")[1];void 0!=itemId&&itemId==item.id&&(found=!0,mapObject.panTo(new google.maps.LatLng(item.lat,item.lng)),getInfoBox(item).open(mapObject,marker))}),!found){var marker=new google.maps.Marker({position:new google.maps.LatLng(item.lat,item.lng),map:mapObject,icon:response.marker+item.id,optimized:!1});marker.setAnimation(google.maps.Animation.DROP),markers.push(marker),initMarkerBackground(item.id,response.marker,item.marker_image),google.maps.event.addListener(marker,"click",function(){closeInfoBox(),getInfoBox(item).open(mapObject,this),mapObject.panTo(new google.maps.LatLng(item.lat,item.lng))})}})}var mapObject,overlays=[],markers=[],currentDrawingMode=null,mapOptions={zoom:GMAP.zoom,center:new google.maps.LatLng(GMAP.coords.lat,GMAP.coords.lng),disableDefaultUI:!0};null!=document.getElementById("map")&&initialize(),$("#search-restaurant-map>input").typeahead({source:function(q,process){var deffered=$.ajax({method:"GET",url:"/search",data:{q:q},beforeSend:function(){resetZoom(mapObject),$(".search-map-spinner").fadeIn(100)}});deffered.done(function(response){var data=[],results=response.data;return void 0!=response.message?process(data):(closeInfoBox(),results.forEach(function(item){data.push(item.id+"#"+item.name+"#"+item.type+"#"+item.marker_image+"#"+item.address)}),process(data))}).always(function(){$(".search-map-spinner").fadeOut(100)})},highlighter:function(itemRaw){var item=itemRaw.split("#"),html='<div class="typeahead">';return html+='<div class="pull-left"><img src="'+item[3]+'" width="32" height="32" class="img-rounded"></div>',html+='<div class="pull-left margin-small">',html+='<div class="text-left">',html+="<strong>"+item[1]+"</strong>",html+='<span class="text-type">'+item[2]+' <i class="fa fa-spoon"></i></span>',html+="</div>",html+='<div class="text-left text-address">'+item[4]+"</div>",html+="</div>",html+='<div class="clearfix"></div>',html+="</div>"},updater:function(itemRaw){var item=itemRaw.split("#");return item[1]},afterSelect:renderResultOnMap}),$("#search-restaurant-map>input").on("input",function(){var value=$(this).val();""==value&&toggleMarkers(markers,mapObject)}),$(".categories-container ul.categories-list li").on("click",function(){var typeClicked=$(this).data("value");closeInfoBox();var deffered=$.get("resturants/getbytype",{type:typeClicked});deffered.done(function(response){return void 0!=response.message?(toggleMarkers(markers,mapObject),void showInfoMessage(response.message,"Restaurant of type "+typeClicked+" not found.")):(clearMarkers(markers),void $.each(response.data,function(key,item){markers.forEach(function(marker){var itemId=marker.icon.split("#")[1];void 0!=itemId&&itemId==item.id&&(marker.setMap(mapObject),marker.setAnimation(google.maps.Animation.DROP),mapObject.panTo(new google.maps.LatLng(item.lat,item.lng)))})}))})}),$("button#btn-loved-all").on("click",function(){var url="/restaurants/getallloved",deffered=$.get(url);deffered.done(function(response){return void 0!=response.message?(toggleMarkers(markers,mapObject),void showInfoMessage(response.message,"No Loved Restaurant found.")):(clearMarkers(markers),void $.each(response.data,function(key,item){markers.forEach(function(marker){var itemId=marker.icon.split("#")[1];void 0!=itemId&&itemId==item.id&&(marker.setMap(mapObject),marker.setAnimation(google.maps.Animation.DROP),mapObject.panTo(new google.maps.LatLng(item.lat,item.lng)))})}))})}),$("#btn-loved").on("click",function(){var url="/restaurants/getloved",deffered=$.get(url);deffered.done(function(response){return void 0!=response.message?(toggleMarkers(markers,mapObject),void showInfoMessage(response.message,"No Loved Restaurant found.")):(clearMarkers(markers),void $.each(response.data,function(key,item){markers.forEach(function(marker){var itemId=marker.icon.split("#")[1];void 0!=itemId&&itemId==item.id&&(marker.setMap(mapObject),marker.setAnimation(google.maps.Animation.DROP),mapObject.panTo(new google.maps.LatLng(item.lat,item.lng)))})}))})}),$("#btn-liked").on("click",function(){var url="/restaurants/getliked",deffered=$.get(url);deffered.done(function(response){return void 0!=response.message?(toggleMarkers(markers,mapObject),void showInfoMessage(response.message,"No Liked Restaurant found.")):(clearMarkers(markers),void $.each(response.data,function(key,item){markers.forEach(function(marker){var itemId=marker.icon.split("#")[1];void 0!=itemId&&itemId==item.id&&(marker.setMap(mapObject),marker.setAnimation(google.maps.Animation.DROP),mapObject.panTo(new google.maps.LatLng(item.lat,item.lng)))})}))})}),$("#btn-disliked").on("click",function(){var url="/restaurants/getdisliked",deffered=$.get(url);deffered.done(function(response){return void 0!=response.message?(toggleMarkers(markers,mapObject),void showInfoMessage(response.message,"No Disliked Restaurant found.")):(clearMarkers(markers),void $.each(response.data,function(key,item){markers.forEach(function(marker){var itemId=marker.icon.split("#")[1];void 0!=itemId&&itemId==item.id&&(marker.setMap(mapObject),marker.setAnimation(google.maps.Animation.DROP),mapObject.panTo(new google.maps.LatLng(item.lat,item.lng)))})}))})})}),$(function(){"use strict";$("#get_directions_modal").on("shown.bs.modal",function(e){var triggerBtn=$(e.relatedTarget),restaurantId=triggerBtn.data("restaurant-id"),url="/restaurants/getdata/"+restaurantId,deffered=$.get(url);checkGeolocationSupport()||setTimeout(function(){$("#get_directions_modal").modal("hide")},1e3),deffered.done(function(response){var item=response.data;$("span#restaurant-name").text(item.name),$("span#restaurant-address").text(item.address),$("div#map_get_directions").gmap3({trigger:"resize",map:{options:{center:[item.lat,item.lng],zoom:GMAP.zoom}},marker:{latLng:[item.lat,item.lng],options:{icon:response.marker+item.id,optimized:!1}}}),navigator.geolocation.getCurrentPosition(function(position){var currentLocation=[position.coords.latitude,position.coords.longitude];$("div#map_get_directions").gmap3({marker:{latLng:currentLocation,options:{icon:GMAP.defaultMarker}},map:{options:{center:currentLocation}},getroute:{options:{origin:currentLocation,destination:[item.lat,item.lng],travelMode:google.maps.DirectionsTravelMode.DRIVING},callback:function(results){results&&$(this).gmap3({directionsrenderer:{options:{directions:results,suppressMarkers:!0,polylineOptions:{strokeColor:"#2ecc71",strokeOpacity:.8,strokeWeight:5}}}})}}})},function(positionError){showErrorMessage("Error: "+positionError.message,"Location Error")},{enableHighAccuracy:!0,timeout:1e4}),initMarkerBackground(item.id,response.marker,item.marker_image)}).always(function(){Loading.destroy()})}).on("hidden.bs.modal",function(){$("div#map_get_directions").gmap3("destroy")}).on("show.bs.modal",function(){Loading.enable("circular-square"),$("div#map_get_directions").gmap3()})}),$(function(){function initialize(){var href=location.href,restauId=href.substr(href.lastIndexOf("/")+1),url="/restaurants/getdata/"+restauId,deffered=$.get(url);deffered.done(function(response){var item=response.data,mapOptions_place={zoom:GMAP.zoom,center:new google.maps.LatLng(item.lat,item.lng),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0},map_place=new google.maps.Map(document.getElementById("map_place"),mapOptions_place),coords=new google.maps.LatLng(item.lat,item.lng);marker=new google.maps.Marker({position:coords,map:map_place,icon:response.marker+item.id,optimized:!1}),initMarkerBackground(item.id,response.marker,item.marker_image)})}var map_place=document.getElementById("map_place");null!=map_place&&initialize()}),$(function(){"use strict";$("#modal_new_restaurant,#modal_update_restaurant").on("shown.bs.modal",function(){var latlng=$(this).find("form input[name=coordinates]").val(),lat=GMAP.coords.lat,lng=GMAP.coords.lng;if(""!=latlng){var latlngArr=latlng.split(",");lat=latlngArr[0],lng=latlngArr[1]}$("div.map-location-picker").gmap3({trigger:"resize",map:{options:{center:[lat,lng],zoom:GMAP.zoom,disableDefaultUI:!0}},marker:{latLng:[lat,lng],options:{draggable:!0,icon:GMAP.defaultMarker},events:{dragend:function(marker,event,context){var newLatLng={lat:marker.position.A,lng:marker.position.F};updateMapCenter(this,newLatLng),$('input[name="coordinates"]').val(newLatLng.lat+","+newLatLng.lng)}}}})}).on("hidden.bs.modal",function(){var form=$("form#new-restaurant-form");resetForm(form),$("div.map-location-picker").gmap3("destroy")}).on("show.bs.modal",function(){$("div.map-location-picker").gmap3()})}),$(function(){function initialize(){var marker,mapOptions={zoom:GMAP.zoom,center:new google.maps.LatLng(GMAP.coords.lat,GMAP.coords.lng),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0},mapObject=new google.maps.Map(document.getElementById("map_visits"),mapOptions);$.get("/checkins/getdata",function(data){var items=data.data;$.each(items,function(key,item){marker=new google.maps.Marker({position:new google.maps.LatLng(item.lat,item.lng),map:mapObject,icon:data.marker+item.id,optimized:!1}),addCSSRule(document.styleSheets[0],'img[src="'+data.marker+item.id+'"]','background:url("'+item.marker_image+'") no-repeat 4px 4px'),mapObject.panTo(new google.maps.LatLng(item.lat,item.lng)),google.maps.event.addListener(marker,"click",function(){mapObject.panTo(new google.maps.LatLng(item.lat,item.lng))})})})}var map_index=document.getElementById("map_visits");null!=map_index&&initialize()}),$(function(){}),$(function(){"use strict";function renderSearchResult(selectedRestaurant){window.location="/search-results/"+selectedRestaurant}$('[data-toggle="tooltip"]').tooltip(),$("input[name=birthdate]").datepicker({startView:1,orientation:"top right",endDate:"now()"}),$("form[data-form-remote-no-message-success]").on("submit",function(e){e.preventDefault();var form=$(this),deffered=processFormAjaxRequest(form),inputs=form.find('input[type="submit"]');deffered.done(function(data){setTimeout(function(){window.location=data.redirecTo},1e3)}).fail(function(jqXHR){showErrorMessage("Something goes wrong")}).always(function(){inputs.prop("disabled",!1)})}),$("form[data-form-remote]").on("submit",function(e){e.preventDefault();var form=$(this),deffered=processFormAjaxRequest(form),inputs=form.find('input[type="submit"]');inputs.prop("disabled",!0),deffered.done(function(data){showSuccessMessage(data.message),resetForm(form),setTimeout(function(){window.location=data.redirecTo},1e3)}).fail(function(jqXHR){null==jqXHR.responseJSON.error?displayErrors(form,jqXHR.responseJSON):showErrorMessage(jqXHR.responseJSON.error)}).always(function(){inputs.prop("disabled",!1)})}),$("input[data-confirm], button[data-confirm]").on("click",function(e){e.preventDefault();var input=$(this),form=input.closest("form"),prompt=input.data("confirm")||"Are you sure?",promptYes=input.data("confirm-yes")||"Yes, pls!";swal({title:"Are you sure?",text:prompt,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:promptYes,cancelButtonText:"No, cancel pls!",closeOnConfirm:!1},function(isConfirm){isConfirm&&form.submit()})}),$("form[data-form-files-remote]").on("submit",function(e){e.preventDefault();var form=$(this),deffered=processFormAjaxRequestWithFile(form),inputs=form.find('input[type="submit"]');inputs.prop("disabled",!0),deffered.done(function(data){showSuccessMessage(data.message),resetForm(form),setTimeout(function(){window.location=data.redirecTo},1e3)}).fail(function(jqXHR){null==jqXHR.responseJSON.error?displayErrors(form,jqXHR.responseJSON):showErrorMessage(jqXHR.responseJSON.error)}).always(function(){inputs.prop("disabled",!1)})}),$("div.check-in-button-group>ul li").on("click",function(){var rateValue=$(this).data("value"),restaurantId=$(this).parent().data("restaurant-id"),url="/restaurants/"+restaurantId+"/checkin",button=$("div.check-in-button-group>button"),loader=$("div.checkin-loader");button.prop("disabled",!0),loader.fadeIn(100);var deffered=$.post(url,{restaurant_id:restaurantId,rating:rateValue});deffered.done(function(data){showSuccessMessage("Done!",data.message)}).fail(function(response){401==response.status?showErrorMessage("Pleae Register to Continue","Registration Required"):showErrorMessage("Cannot Process Request Right Now","Problem Occured")}).always(function(){button.prop("disabled",!1),loader.fadeOut(100)})}),$("#show-cat").on("click",function(){var button=$(this);button.hasClass("opened")?(button.removeClass("opened").addClass("closed").html("Me"),$("button.cat").fadeOut(400)):(button.addClass("opened").removeClass("closed").html("Hide"),$("button.cat").fadeIn(400))});var $container=$("#menu-container");$container.isotope({itemSelector:".menu-item",layoutMode:"fitRows",transitionDuration:"0.8s"}),$("#menu-filter a").on("click",function(){var selector=$(this).attr("data-filter");return $container.isotope({filter:selector}),!1}),$(".edit-menu-btn").on("click",function(e){var foodId=$(this).data("food-id");$.get("/foods/"+foodId,function(response){var food=response.data;$("#modal_update_menu").modal("show"),$("#update-menu-form input[name=id]").val(food.id),$("#update-menu-form input[name=restaurant]").val(food.restaurant_id),$("#update-menu-form input[name=name]").val(food.name),$("#update-menu-form select[name=type]").val(food.type_id),$("#update-menu-form input[name=price]").val(food.price),$("#update-menu-form textarea[name=details]").val(food.details),$("#update-menu-form input[name=is_specialty]").prop("checked",void 0!=food.is_specialty&&1==food.is_specialty),void 0!=food.image&&$("#edit-menu-preview-food").attr("src",food.image)})}),$("#modal_update_menu").on("hidden.bs.modal",function(){$("#update-menu-form")[0].reset(),$("#update-menu-form p.help-block").text(""),$("#update-menu-form div.form-group").removeClass("has-error"),$("#edit-menu-preview-food").attr("src","/images/no_img.png")}),$(".update-restaurant-btn").on("click",function(e){var restaurantId=$(this).data("id");$.get("/restaurants/getdata/"+restaurantId,function(response){var restaurant=response.data;$("#update-restaurant-form input[name=id]").val(restaurant.id),$("#update-restaurant-form input[name=name]").val(restaurant.name),$("#update-restaurant-form textarea[name=address]").val(restaurant.address),$("#update-restaurant-form select[name=type]").val(restaurant.type.toLowerCase()),$("#update-restaurant-form input[name=contact_no]").val(restaurant.contact),$("#update-restaurant-form input[name=coordinates]").val(restaurant.lat+","+restaurant.lng),""!=restaurant.image&&$("#update-restaurant-preview-logo").attr("src",restaurant.image),$("#modal_update_restaurant").modal("show")})}),$("#search-list > input").typeahead({source:function(q,process){var deffered=$.ajax({method:"GET",url:"/search",data:{q:q},beforeSend:function(){$(".search-map-spinner").fadeIn(100)}});deffered.done(function(response){var data=[],results=response.data;return void 0!=response.message?process(data):(results.forEach(function(item){data.push(item.id+"#"+item.name+"#"+item.type+"#"+item.marker_image+"#"+item.address)}),process(data))}).always(function(){$(".search-map-spinner").fadeOut(100)})},highlighter:function(itemRaw){var item=itemRaw.split("#"),html='<div class="typeahead">';return html+='<div class="pull-left"><img src="'+item[3]+'" width="32" height="32" class="img-rounded"></div>',html+='<div class="pull-left margin-small">',html+='<div class="text-left">',html+="<strong>"+item[1]+"</strong>",html+='<span class="text-type">'+item[2]+' <i class="fa fa-spoon"></i></span>',html+="</div>",html+='<div class="text-left text-address">'+item[4]+"</div>",html+="</div>",html+='<div class="clearfix"></div>',html+="</div>"},updater:function(itemRaw){var item=itemRaw.split("#");return item[1]},afterSelect:renderSearchResult}),$("#search-list > input").on("keypress",function(e){var value=$(this).val();13==e.keyCode&&renderSearchResult(value)})});